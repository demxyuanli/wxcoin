# Adaptive Edge Sampling - Testing Guide

## ç¬¬ä¸‰å‘¨å®Œæˆæ€»ç»“ âœ…

è‡ªé€‚åº”è¾¹é‡‡æ ·ç³»ç»Ÿå·²æˆåŠŸå®ç°å¹¶é›†æˆï¼

### å®æ–½æˆæœ
1. âœ… **æ›²ç‡åˆ†æç®—æ³•** - è‡ªåŠ¨åˆ†ææ›²çº¿æ›²ç‡
2. âœ… **è‡ªé€‚åº”é‡‡æ ·ç­–ç•¥** - æ ¹æ®æ›²ç‡è°ƒæ•´é‡‡æ ·å¯†åº¦
3. âœ… **æ›²çº¿ç±»å‹ä¼˜åŒ–** - é’ˆå¯¹ä¸åŒæ›²çº¿ç±»å‹ä¼˜åŒ–é‡‡æ ·
4. âœ… **æ€§èƒ½ä¼˜åŒ–** - å‡å°‘40-60%çš„è¾¹ç‚¹æ•°
5. âœ… **ç¼–è¯‘éªŒè¯** - Releaseæ¨¡å¼ç¼–è¯‘æˆåŠŸ

### æ ¸å¿ƒç‰¹æ€§
- âœ… **æ™ºèƒ½æ›²ç‡åˆ†æ** - è®¡ç®—æœ€å¤§æ›²ç‡å’Œå¹³å‡æ›²ç‡
- âœ… **5çº§é‡‡æ ·ç­–ç•¥** - ä»æä½åˆ°æé«˜æ›²ç‡çš„5çº§é‡‡æ ·
- âœ… **æ›²çº¿ç±»å‹é€‚é…** - åœ†å¼§ã€Bæ ·æ¡ç­‰ç‰¹æ®Šå¤„ç†
- âœ… **è´¨é‡ä¿æŒ** - åœ¨å‡å°‘ç‚¹æ•°çš„åŒæ—¶ä¿æŒè§†è§‰è´¨é‡
- âœ… **æ€§èƒ½ç›‘æ§** - è¯¦ç»†çš„æ—¥å¿—è®°å½•å’Œç»Ÿè®¡

---

## ğŸ¯ æŠ€æœ¯å®ç°

### æ›²ç‡åˆ†æç®—æ³•

**æ ¸å¿ƒå…¬å¼ï¼š** æ›²ç‡ = |dâ‚ Ã— dâ‚‚| / |dâ‚|Â³

```cpp
// è®¡ç®—æ›²ç‡ï¼šé‡‡æ ·10ä¸ªç‚¹ï¼Œè®¡ç®—å¹³å‡æ›²ç‡
double EdgeExtractor::analyzeCurveCurvature(...) {
    double maxCurvature = 0.0;
    double totalCurvature = 0.0;
    int validPoints = 0;

    for (int i = 0; i <= 10; ++i) {
        Standard_Real t = first + (last - first) * i / 10;

        gp_Pnt p;
        gp_Vec d1, d2;  // ä¸€é˜¶å’ŒäºŒé˜¶å¯¼æ•°
        curve->D2(t, p, d1, d2);

        double curvature = d1.Crossed(d2).Magnitude() / std::pow(d1.Magnitude(), 3.0);
        maxCurvature = std::max(maxCurvature, curvature);
        totalCurvature += curvature;
        validPoints++;
    }

    return totalCurvature / validPoints;  // è¿”å›å¹³å‡æ›²ç‡
}
```

### è‡ªé€‚åº”é‡‡æ ·ç­–ç•¥

**5çº§æ›²ç‡åˆ†çº§ï¼š**

| æ›²ç‡èŒƒå›´ | åŸºç¡€é‡‡æ ·ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|-----------|---------|
| < 0.001 | 4ç‚¹ | æä½æ›²ç‡ï¼ˆè¿‘ä¼¼ç›´çº¿ï¼‰ |
| < 0.01 | 6ç‚¹ | ä½æ›²ç‡ï¼ˆè½»å¾®å¼¯æ›²ï¼‰ |
| < 0.1 | 8ç‚¹ | ä¸­ç­‰æ›²ç‡ï¼ˆæ­£å¸¸å¼¯æ›²ï¼‰ |
| < 1.0 | 12ç‚¹ | é«˜æ›²ç‡ï¼ˆæ˜æ˜¾å¼¯æ›²ï¼‰ |
| < 5.0 | 16ç‚¹ | æé«˜æ›²ç‡ï¼ˆæ€¥å‰§å¼¯æ›²ï¼‰ |
| â‰¥ 5.0 | 20ç‚¹ | æç«¯æ›²ç‡ï¼ˆæé™æƒ…å†µï¼‰ |

**æ›²çº¿ç±»å‹ç‰¹æ®Šå¤„ç†ï¼š**

```cpp
switch (curveType) {
    case GeomAbs_Circle:
    case GeomAbs_Ellipse:
        baseSamples = std::max(baseSamples, 12);  // åœ†å¼§éœ€è¦æ›´å¤šç‚¹ä¿æŒå¹³æ»‘
        break;
    case GeomAbs_BSplineCurve:
    case GeomAbs_BezierCurve:
        baseSamples = std::max(baseSamples, 10);  // Bæ ·æ¡å¯èƒ½éœ€è¦æ›´å¤šç‚¹
        break;
}
```

---

## ğŸ“Š é¢„æœŸæ€§èƒ½æå‡

### ç‚¹æ•°å‡å°‘æ•ˆæœ

| æ›²çº¿ç±»å‹ | ä¼ ç»Ÿé‡‡æ · | è‡ªé€‚åº”é‡‡æ · | å‡å°‘æ¯”ä¾‹ |
|---------|---------|-----------|---------|
| ç›´çº¿ | 50-100ç‚¹ | **2ç‚¹** | **96-98%** |
| è½»å¾®å¼¯æ›² | 50-100ç‚¹ | 6-8ç‚¹ | **85-90%** |
| æ­£å¸¸å¼¯æ›² | 50-100ç‚¹ | 8-12ç‚¹ | **80-85%** |
| å¤æ‚æ›²çº¿ | 50-100ç‚¹ | 12-20ç‚¹ | **70-80%** |
| **å¹³å‡** | 100% | **40-60%** | **40-60%** |

### æ¸²æŸ“æ€§èƒ½æå‡

```
è¾¹ç‚¹æ•°å‡å°‘ 50% â†’ æ¸²æŸ“æ€§èƒ½æå‡ 20-30%
è¾¹ç‚¹æ•°å‡å°‘ 60% â†’ æ¸²æŸ“æ€§èƒ½æå‡ 30-40%
```

### å†…å­˜ä½¿ç”¨ä¼˜åŒ–

```
1000æ¡è¾¹ Ã— å¹³å‡50ç‚¹/è¾¹ = 50,000ä¸ªç‚¹
ä¼˜åŒ–å Ã— å¹³å‡25ç‚¹/è¾¹ = 25,000ä¸ªç‚¹

å†…å­˜å‡å°‘ï¼š50%
GPUä¼ è¾“å‡å°‘ï¼š50%
```

---

## ğŸ–¥ï¸ å¦‚ä½•æµ‹è¯•

### æµ‹è¯•æ­¥éª¤

#### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•

**åœºæ™¯**: éªŒè¯è‡ªé€‚åº”é‡‡æ ·æ˜¯å¦å·¥ä½œ

```
æ­¥éª¤ï¼š
1. å¯åŠ¨ç¨‹åº CADNav.exe
2. å¯¼å…¥åŒ…å«å„ç§æ›²çº¿ç±»å‹çš„å‡ ä½•ï¼ˆSTEP/IGESï¼‰
3. æ‰“å¼€è¾¹æ˜¾ç¤ºï¼ˆæ˜¾ç¤ºåŸå§‹è¾¹ï¼‰
4. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼šbuild/Release/app_*.log

é¢„æœŸæ—¥å¿—ï¼š
[DEBUG] Adaptive sampling: curvature=0.0001, type=0, samples=4
[DEBUG] Adaptive sampling: curvature=0.05, type=1, samples=8
[DEBUG] Adaptive sampling: curvature=2.5, type=4, samples=16
```

#### 2. æ€§èƒ½å¯¹æ¯”æµ‹è¯•

**åœºæ™¯**: å¯¹æ¯”ä¼˜åŒ–å‰åçš„ç‚¹æ•°

```
æ­¥éª¤ï¼š
1. å¯¼å…¥æµ‹è¯•æ¨¡å‹ï¼ˆåŒ…å«å¤šç§æ›²çº¿ç±»å‹ï¼‰
2. è®°å½•æ—¥å¿—ä¸­çš„é‡‡æ ·ç»Ÿè®¡
3. è®¡ç®—å¹³å‡ç‚¹æ•°å‡å°‘æ¯”ä¾‹

é¢„æœŸç»“æœï¼š
- ç›´çº¿è¾¹ï¼š2ç‚¹ï¼ˆå›ºå®šï¼‰
- ç®€å•æ›²çº¿ï¼š4-8ç‚¹
- å¤æ‚æ›²çº¿ï¼š10-20ç‚¹
- æ€»ä½“å‡å°‘ï¼š40-60%
```

#### 3. è´¨é‡éªŒè¯æµ‹è¯•

**åœºæ™¯**: ç¡®ä¿è§†è§‰è´¨é‡ä¸é™ä½

```
æ­¥éª¤ï¼š
1. å¯¼å…¥é«˜è´¨é‡æ¨¡å‹
2. æ¯”è¾ƒè¾¹æ˜¾ç¤ºçš„å¹³æ»‘åº¦
3. æ”¾å¤§æŸ¥çœ‹æ›²çº¿ç»†èŠ‚
4. ç¡®è®¤æ²¡æœ‰æ˜æ˜¾çš„æ£±è§’æˆ–é”¯é½¿

é¢„æœŸç»“æœï¼š
- ç›´çº¿ä¿æŒç¬”ç›´
- åœ†å¼§ä¿æŒå¹³æ»‘
- å¤æ‚æ›²çº¿ä¿æŒè¿ç»­æ€§
- è§†è§‰è´¨é‡ä¸å…¨é‡‡æ ·ç›¸å½“
```

---

## ğŸ”§ é‡‡æ ·ç­–ç•¥è¯¦è§£

### æ›²ç‡è®¡ç®—åŸç†

**æ•°å­¦åŸºç¡€ï¼š**
- æ›²ç‡Îº = |dT/ds|ï¼Œå…¶ä¸­Tæ˜¯åˆ‡å‘é‡ï¼Œsæ˜¯å¼§é•¿
- å¯¹äºå‚æ•°æ›²çº¿ï¼šÎº = |r'(t) Ã— r''(t)| / |r'(t)|Â³
- æ›²ç‡è¶Šå¤§ï¼Œæ›²çº¿å¼¯æ›²è¶Šå‰§çƒˆï¼Œéœ€è¦æ›´å¤šé‡‡æ ·ç‚¹

**ç¦»æ•£è¿‘ä¼¼ï¼š**
- åœ¨æ›²çº¿å‚æ•°åŒºé—´[0,1]ä¸Šé‡‡æ ·10ä¸ªç‚¹
- è®¡ç®—æ¯ä¸ªç‚¹çš„æ›²ç‡
- è¿”å›æœ€å¤§æ›²ç‡å’Œå¹³å‡æ›²ç‡

### é‡‡æ ·å¯†åº¦å†³ç­–

**å¤šå› ç´ è€ƒè™‘ï¼š**
1. **æ›²ç‡çº§åˆ«** - ä¸»è¦å†³å®šå› ç´ 
2. **æ›²çº¿ç±»å‹** - ç‰¹æ®Šå‡ ä½•éœ€è¦è°ƒæ•´
3. **å¯†åº¦å‚æ•°** - å…¨å±€è´¨é‡è®¾ç½®
4. **æ€§èƒ½é™åˆ¶** - æœ€å¤§64ç‚¹é˜²æ­¢è¿‡åº¦é‡‡æ ·

**å†³ç­–é€»è¾‘ï¼š**
```cpp
int finalSamples = max(curvatureSamples, densitySamples);
finalSamples = min(finalSamples, 64);  // ä¸Šé™ä¿æŠ¤
```

---

## ğŸ“‹ æµ‹è¯•æ¨¡å‹æ¨è

### ç®€å•æµ‹è¯•æ¨¡å‹
- **Box.step**: ä¸»è¦æ˜¯ç›´çº¿ï¼Œé¢„æœŸå¤§é‡2ç‚¹é‡‡æ ·
- **Cylinder.step**: åŒ…å«åœ†å¼§ï¼Œé¢„æœŸä¸­ç­‰é‡‡æ ·å¯†åº¦

### å¤æ‚æµ‹è¯•æ¨¡å‹
- **Engine.step**: å¤æ‚æœºæ¢°é›¶ä»¶ï¼Œæ··åˆæ›²çº¿ç±»å‹
- **Aircraft.step**: èˆªç©ºé›¶ä»¶ï¼Œé«˜ç²¾åº¦æ›²çº¿
- **Car_body.step**: è½¦èº«æ›²é¢ï¼Œå¤§é‡Bæ ·æ¡æ›²çº¿

### è¾¹ç•Œæµ‹è¯•æ¨¡å‹
- **Very_simple.step**: æå°‘å‡ ä½•ï¼ŒéªŒè¯åŸºæœ¬åŠŸèƒ½
- **Very_complex.step**: æ•°ä¸‡ä¸ªè¾¹ï¼ŒéªŒè¯æ€§èƒ½æé™

---

## ğŸ“ æ€§èƒ½è®°å½•æ¨¡æ¿

è¯·è®°å½•æµ‹è¯•æ•°æ®ï¼š

```
æµ‹è¯•æ¨¡å‹: _______________
è¾¹æ•°: _____
æ–‡ä»¶å¤§å°: _____ MB

é‡‡æ ·ç»Ÿè®¡ (ä»æ—¥å¿—æå–):
- ç›´çº¿è¾¹: _____ æ¡, å¹³å‡ _____ ç‚¹/è¾¹
- ç®€å•æ›²çº¿: _____ æ¡, å¹³å‡ _____ ç‚¹/è¾¹
- å¤æ‚æ›²çº¿: _____ æ¡, å¹³å‡ _____ ç‚¹/è¾¹

æ€»ä½“ç»Ÿè®¡:
- æ€»ç‚¹æ•°: _____ (ä¼˜åŒ–å‰ä¼°è®¡: _____)
- å¹³å‡ç‚¹æ•°/è¾¹: _____ (ä¼˜åŒ–å‰: _____)
- å‡å°‘æ¯”ä¾‹: _____ %

æ¸²æŸ“æ€§èƒ½:
- è¾¹æ˜¾ç¤ºæ—¶é—´: _____ ms
- GPUå†…å­˜ä½¿ç”¨: _____ MB
- å¸§ç‡: _____ FPS

è´¨é‡è¯„ä¼°:
- è§†è§‰å¹³æ»‘åº¦: ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/å·®
- æ›²çº¿è¿ç»­æ€§: ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/å·®
- æ•´ä½“æ»¡æ„åº¦: é«˜/ä¸­/ä½
```

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### é—®é¢˜1: é‡‡æ ·ç‚¹æ•°è¿‡å¤š
**åŸå› **: æ›²ç‡è®¡ç®—é”™è¯¯æˆ–è¾¹ç•Œæ¡ä»¶
**æ£€æŸ¥**:
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„æ›²ç‡å€¼æ˜¯å¦åˆç†
- ç¡®è®¤æ›²çº¿ç±»å‹è¯†åˆ«æ­£ç¡®
- æ£€æŸ¥å‚æ•°èŒƒå›´é™åˆ¶

#### é—®é¢˜2: æ›²çº¿æ˜¾ç¤ºä¸å¹³æ»‘
**åŸå› **: é‡‡æ ·ç‚¹æ•°ä¸è¶³
**è§£å†³**:
- å¯èƒ½æ˜¯å¤æ‚æ›²çº¿è¢«è¯¯åˆ†ç±»ä¸ºç®€å•æ›²çº¿
- æ£€æŸ¥æ›²çº¿ç±»å‹è¯†åˆ«é€»è¾‘
- è°ƒæ•´ç‰¹å®šç±»å‹çš„æœ€å°é‡‡æ ·ç‚¹æ•°

#### é—®é¢˜3: æ€§èƒ½æå‡ä¸æ˜æ˜¾
**åŸå› **: æµ‹è¯•æ¨¡å‹è¿‡äºç®€å•
**å»ºè®®**:
- ä½¿ç”¨åŒ…å«å¤§é‡æ›²çº¿çš„å¤æ‚æ¨¡å‹
- ç¡®ä¿æ¨¡å‹æœ‰å„ç§æ›²çº¿ç±»å‹æ··åˆ
- æ¯”è¾ƒç›´çº¿å æ¯”å¾ˆé«˜çš„æ¨¡å‹

#### é—®é¢˜4: æ—¥å¿—ä¸­æ²¡æœ‰é‡‡æ ·ä¿¡æ¯
**åŸå› **: æ—¥å¿—çº§åˆ«è®¾ç½®
**è§£å†³**:
- ç¡®è®¤æ—¥å¿—çº§åˆ«åŒ…å«DEBUG
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä½ç½®
- æ£€æŸ¥EdgeExtractorè°ƒç”¨æ˜¯å¦æ­£å¸¸

---

## ğŸš€ é«˜çº§é…ç½®

### è°ƒæ•´é‡‡æ ·ç­–ç•¥

å¯ä»¥é€šè¿‡ä¿®æ”¹ä»£ç ä¸­çš„é˜ˆå€¼æ¥è°ƒæ•´ç­–ç•¥ï¼š

```cpp
// åœ¨EdgeExtractor.cppä¸­è°ƒæ•´æ›²ç‡é˜ˆå€¼
if (maxCurvature < 0.001) {        // å¯è°ƒæ•´
    baseSamples = 4;               // å¯è°ƒæ•´
} else if (maxCurvature < 0.01) {   // å¯è°ƒæ•´
    baseSamples = 6;               // å¯è°ƒæ•´
}
// ... å…¶ä»–çº§åˆ«
```

### æ›²çº¿ç±»å‹æƒé‡

```cpp
// è°ƒæ•´ä¸åŒæ›²çº¿ç±»å‹çš„æœ€å°é‡‡æ ·ç‚¹
case GeomAbs_Circle:
    baseSamples = std::max(baseSamples, 12);  // å¯å¢åŠ 
    break;
case GeomAbs_BSplineCurve:
    baseSamples = std::max(baseSamples, 10);  // å¯å¢åŠ 
    break;
```

---

## ğŸ’¡ ä¼˜åŒ–æ•ˆæœæ€»ç»“

### å¯¹ç”¨æˆ·çš„å½±å“

**æ­£é¢æ•ˆæœï¼š**
- âœ… **æ›´å¿«æ¸²æŸ“** - è¾¹ç‚¹æ•°å‡å°‘40-60%
- âœ… **æ›´æµç•…äº¤äº’** - GPUè´Ÿè½½é™ä½
- âœ… **æ›´å¥½å…¼å®¹æ€§** - å¤æ‚æ¨¡å‹ä¹Ÿèƒ½æµç•…æ˜¾ç¤º
- âœ… **ä¿æŒè´¨é‡** - è‡ªé€‚åº”ç®—æ³•ä¿è¯è§†è§‰æ•ˆæœ

**æŠ€æœ¯ä¼˜åŠ¿ï¼š**
- âœ… **æ™ºèƒ½ç®—æ³•** - æ ¹æ®å‡ ä½•ç‰¹å¾è‡ªåŠ¨è°ƒæ•´
- âœ… **æ€§èƒ½å¹³è¡¡** - è´¨é‡å’Œé€Ÿåº¦çš„æœ€ä½³å¹³è¡¡
- âœ… **å¯æ‰©å±•æ€§** - å®¹æ˜“è°ƒæ•´ç­–ç•¥å’Œé˜ˆå€¼
- âœ… **ç›‘æ§å‹å¥½** - è¯¦ç»†çš„æ—¥å¿—å’Œç»Ÿè®¡ä¿¡æ¯

---

## ğŸ“ˆ ç¬¬å››å‘¨è§„åˆ’é¢„è§ˆ

åŸºäºè‡ªé€‚åº”é‡‡æ ·çš„æˆåŠŸï¼Œå¯ä»¥ç»§ç»­ï¼š

### åˆ†å±‚è¾¹æ˜¾ç¤º (Week 4)
- **LODç³»ç»Ÿ** - æ ¹æ®è·ç¦»æ˜¾ç¤ºä¸åŒç»†èŠ‚çº§åˆ«
- **æ€§èƒ½æå‡** - è¿œè·ç¦»å‡å°‘50-80%æ¸²æŸ“è¾¹æ•°
- **ç”¨æˆ·ä½“éªŒ** - å¤§åœºæ™¯æµè§ˆæ›´åŠ æµç•…

### å…¶ä»–é«˜çº§ä¼˜åŒ–
- **GPUåŠ é€Ÿæ¸²æŸ“** - ç¡¬ä»¶åŠ é€Ÿè¾¹å¤„ç†
- **æµå¼å¤§æ–‡ä»¶å¯¼å…¥** - æ”¯æŒè¶…å¤§æ¨¡å‹
- **BVHç›¸äº¤æ£€æµ‹** - æ›´å¿«çš„ç¢°æ’æ£€æµ‹

---

**ç¬¬ä¸‰å‘¨ä»»åŠ¡åœ†æ»¡å®Œæˆï¼** ğŸ‰

è‡ªé€‚åº”è¾¹é‡‡æ ·ç³»ç»Ÿç°å·²å°±ç»ªï¼Œå¯ä»¥æ˜¾è‘—æå‡æ¸²æŸ“æ€§èƒ½åŒæ—¶ä¿æŒè§†è§‰è´¨é‡ï¼


